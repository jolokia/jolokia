<!DOCTYPE html>
<!-- Generated by Apache Maven Doxia at 2024-12-04 -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="keywords" content="jmx, rest, json, http, agent, jmx-rest-bridge, java, jmx4perl, jsr-160, jmx-rest">
  <title>                Jolokia &#x2013; Jolokia Javascript Client library                                              </title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap">
  <style media="all">
    @import url("../css/reset.css");
    @import url("../css/text.css");
    @import url("../css/maven-theme-jolokia.css");
    @import url("../css/site.css");
  </style>
  <script data-cfasync="false">
    let host = "jolokia.org";
      if ((host === window.location.host) && (window.location.protocol !== "https:")) {
        window.location.protocol = "https";
      }
  </script>
  <script src="../js/prettify/prettify.js"></script>
  <link rel="stylesheet" href="../css/print.css" media="print">
  <link rel="icon" type="image/png" href="../images/favicon.png">
  <meta name="Date-Creation-yyyymmdd" content="20241204" />
  <meta name="Date-Revision-yyyymmdd" content="20241204" />
  <meta http-equiv="Content-Language" content="en" />
  
</head>
<body>
<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="header-image"></div>
  </div>

  <!-- Top-Bar  -->
  <nav class="header">
      <div class="top_left"></div>
      <div class="top_link">
        <a href="../index.html">Home</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../download.html">Download</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../features.html">Features</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../documentation.html">Documentation</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../support.html">Support</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="https://ro14nd.de">Blog</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../about.html">About</a>
    </div>
    <div class="top_sep"></div>
    </nav>

  <main>
    <nav class="menu">
            <div class="navibox">
          <div class="navihead">
             <h5>Jolokia</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../libraries.html" title="Libraries">Libraries</a>
            </li>
                  <li class="none">
                          <a href="../migration.html" title="Migration to 2.0">Migration to 2.0</a>
            </li>
                  <li class="none">
                          <a href="../features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../support.html" title="Support">Support</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../documentation.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../concepts.html" title="Concepts">Concepts</a>
            </li>
                  <li class="none">
                          <a href="../tutorial.html" title="Tutorial">Tutorial</a>
            </li>
                  <li class="none">
                          <a href="../reference/html/index.html" title="Reference Manual">Reference Manual</a>
            </li>
                  <li class="none">
                          <a href="../talks.html" title="Talks and Screencasts">Talks and Screencasts</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Agents</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../agent.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../agent/war.html" title="Web Archive (war)">Web Archive (war)</a>
            </li>
                  <li class="none">
                          <a href="../agent/osgi.html" title="Osgi">Osgi</a>
            </li>
                  <li class="none">
                          <a href="../agent/jvm.html" title="JVM">JVM</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Clients</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../client/java.html" title="Java">Java</a>
            </li>
                  <li class="none">
            <strong>JavaScript</strong>
          </li>
                  <li class="none">
                          <a href="../client/perl.html" title="Perl">Perl</a>
            </li>
                  <li class="none">
                          <a href="../client/curl.html" title="Curl">Curl</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Project Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
    </div>
      </div>
      </nav>
    <div class="main">
      <!-- Page content -->
      <div class="sect1">
<h2 id="javascript_client_library">JavaScript Client Library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jolokia&#8217;s JavaScript client library allows for easy access to
the Jolokia agent from within JavaScript scripts. It
encapsulates the JSON/HTTP access within a simple object
layer.</p>
</div>
<div class="paragraph">
<p>The JavaScript client binding provides the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Synchronous and asynchronous operations</p>
</li>
<li>
<p>Support for JSONP for accessing servers other than the one
serving the Javscript file</p>
</li>
<li>
<p>Support for all Jolokia features like bulk requests or JMX
proxy calls</p>
</li>
<li>
<p>Simple access methods like <code>getAttribute</code> or
<code>execute</code> in addition to a generic
<code>request</code> method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Documentation for the JavaScript library can be found in the
reference manual in the chapter
<a href="../reference/html/manual/clients.html#client-javascript">JavaScript
Client Library</a>.</p>
</div>
<div class="sect2">
<h3 id="installation">Installation</h3>
<div class="paragraph">
<p>The Jolokia JavaScript library can be downloaded from the
<a href="../download.html">download page</a>. It is divided
into two scripts: <code>jolokia.js</code> contains the basic
<code>Jolokia</code> object definition which provides the
generic <code>request()</code>
method. <code>jolokia-simple.js</code> adds to this
definition methods for a simplified access, which are easier
to use but less powerful. In addition these libs require
<a href="https://www.jquery.com" class="externalLink" target="_blank" rel="noopener">jQuery</a>. A typical setup in an HTML page
using the library looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"jquery-3.7.1.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"jolokia.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"jolokia-simple.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For production setup, the minified versions
(e.g. <code>jolokia-min.js</code>) are recommended since the
original are blown up with inline documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="example">Example</h3>
<div class="paragraph">
<p>The following simple example shows how to fetch the used
Heap Memory from a Jolokia agent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="javascript"><span class="c1">// Create a new jolokia client accessing the agent on the same</span>
<span class="c1">// Host which serves this document:</span>
<span class="kd">var</span> <span class="nx">j4p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Jolokia</span><span class="p">(</span><span class="dl">"</span><span class="s2">/jolokia</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Request the memory information asynchronously and print it on the console</span>
<span class="nx">j4p</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">read</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">mbean</span><span class="p">:</span> <span class="dl">"</span><span class="s2">java.lang:type=Memory</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">attribute</span><span class="p">:</span> <span class="dl">"</span><span class="s2">HeapMemoryUsage</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Heap-Memory used: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">response</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="dl">"</span><span class="s2">used</span><span class="dl">"</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">});</span>

<span class="c1">// Same as above, but synchronously and with the simple API:</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Heap-Memory used:</span><span class="dl">"</span> <span class="o">+</span>
            <span class="nx">j4p</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">java.lang:type=Memory</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">HeapMemoryUsage</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">used</span><span class="dl">"</span><span class="p">));</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing">Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jolokia comes with a test web application for
integration testing. It contains <a href="https://qunitjs.com/" class="externalLink" target="_blank" rel="noopener">QUnit</a> based tests that run within a browser. The
submodule <code>examples/client-javascript-test-app</code> creates a WAR artifact which
can be deployed in a servlet container. The Jolokia agent is
contained and reachable under the URL
<code>/jolokia</code>. The unit tests can be found at</p>
</div>
<table class="tableblock frame-all grid-all stretch bodyTable">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia-test.html</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QUnit tests for the base library</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia-simple-test.html</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QUnit tests for the simple API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia-all-test.html</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All the tests above combined</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This Maven module is using <code>jetty-maven-plugin</code>, so we can run the application using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span>mvn clean package jetty:run-war <span class="nt">-f</span> examples/client-javascript-test-app/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Jetty server will be started with the test application deployed.</p>
</div>
<div class="paragraph">
<p>In order to simplify development of unit tests, a shell script
<code>makeLinks.sh</code> is included in <code>examples/client-javascript-test-app</code> module, which can be used in
Linux like OS&#8217;es to create symbolic links to the JavaScript and HTML
files in the source directories. A typical workflow looks
like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Initialize:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">$ </span><span class="nb">cd </span>examples/client-javascript-test-app/
<span class="nv">$ </span>mvn clean package jetty:run-war
<span class="nv">$ </span>./makeLinks.sh <span class="c"># in separate terminal window</span></code></pre>
</div>
</div>
</li>
<li>
<p>Edit and save the JavaScript files (e.g. <code>jolokia.js</code>
or <code>jolokia-test.js</code>)</p>
</li>
<li>
<p>Reload the test HTML files in the browser</p>
</li>
</ul>
</div>
</div>
</div>
      <!-- /Page content -->
    </div>
  </main>

  <footer class="copyright">Copyright &#169;                   2024 Roland Hu&szlig;. 
          All Rights Reserved.      
                
                 <span id="publishDate">Last Published: 2024-12-04</span>
              &nbsp;| <span id="projectVersion">Version: 2.1.3-SNAPSHOT</span>
            </footer>
</div>
</body>
</html>
