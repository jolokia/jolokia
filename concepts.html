<!DOCTYPE html>
<!-- Generated by Apache Maven Doxia at 2024-12-04 -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="keywords" content="jmx, rest, json, http, agent, jmx-rest-bridge, java, jmx4perl, jsr-160, jmx-rest">
  <title>                      Jolokia &#x2013; Concepts                                        </title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap">
  <style media="all">
    @import url("./css/reset.css");
    @import url("./css/text.css");
    @import url("./css/maven-theme-jolokia.css");
    @import url("./css/site.css");
  </style>
  <script data-cfasync="false">
    let host = "jolokia.org";
      if ((host === window.location.host) && (window.location.protocol !== "https:")) {
        window.location.protocol = "https";
      }
  </script>
  <script src="./js/prettify/prettify.js"></script>
  <link rel="stylesheet" href="./css/print.css" media="print">
  <link rel="icon" type="image/png" href="./images/favicon.png">
  <meta name="Date-Creation-yyyymmdd" content="20241204" />
  <meta name="Date-Revision-yyyymmdd" content="20241204" />
  <meta http-equiv="Content-Language" content="en" />
  
</head>
<body>
<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="header-image"></div>
  </div>

  <!-- Top-Bar  -->
  <nav class="header">
      <div class="top_left"></div>
      <div class="top_link">
        <a href="index.html">Home</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="download.html">Download</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="features.html">Features</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="documentation.html">Documentation</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="support.html">Support</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="https://ro14nd.de">Blog</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="about.html">About</a>
    </div>
    <div class="top_sep"></div>
    </nav>

  <main>
    <nav class="menu">
            <div class="navibox">
          <div class="navihead">
             <h5>Jolokia</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="libraries.html" title="Libraries">Libraries</a>
            </li>
                  <li class="none">
                          <a href="migration.html" title="Migration to 2.0">Migration to 2.0</a>
            </li>
                  <li class="none">
                          <a href="features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="support.html" title="Support">Support</a>
            </li>
                  <li class="none">
                          <a href="license.html" title="License">License</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="documentation.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
            <strong>Concepts</strong>
          </li>
                  <li class="none">
                          <a href="tutorial.html" title="Tutorial">Tutorial</a>
            </li>
                  <li class="none">
                          <a href="reference/html/index.html" title="Reference Manual">Reference Manual</a>
            </li>
                  <li class="none">
                          <a href="talks.html" title="Talks and Screencasts">Talks and Screencasts</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Agents</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="agent.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="agent/war.html" title="Web Archive (war)">Web Archive (war)</a>
            </li>
                  <li class="none">
                          <a href="agent/osgi.html" title="Osgi">Osgi</a>
            </li>
                  <li class="none">
                          <a href="agent/jvm.html" title="JVM">JVM</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Clients</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="client/java.html" title="Java">Java</a>
            </li>
                  <li class="none">
                          <a href="client/javascript.html" title="JavaScript">JavaScript</a>
            </li>
                  <li class="none">
                          <a href="client/perl.html" title="Perl">Perl</a>
            </li>
                  <li class="none">
                          <a href="client/curl.html" title="Curl">Curl</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Project Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
    </div>
      </div>
      </nav>
    <div class="main">
      <!-- Page content -->
      <div class="sect1">
<h2 id="concepts">Concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While <a href="reference/html/manual/index.html">reference manual</a> contains all the details about Jolokia protocol, configuration, agents, etc., this page highlights some high level concepts and core classes which are required to understand Jolokia goals.</p>
</div>
<div class="sect2">
<h3 id="main_feature">Main feature</h3>
<div class="paragraph">
<p>The most important feature of Jolokia is to provide a <em>protocol adaptor</em> for accessing MBeanServer instances and managed beans available in single or multiple JVMs.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/jolokia_architecture.png" alt="jolokia architecture"/>
</div>
</div>
<div class="paragraph">
<p>Chapter 5.3 of <a href="https://jcp.org/en/jsr/detail?id=3" class="externalLink" target="_blank" rel="noopener">JMX Specification 1.4</a> defines two means of remote access to JVM&#8217;s MBeanServer instances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>connector</em>, which is a way to remotely expose the management interface. For RMI protocol (which is the only mandatory protocol as specified by JMX), it is a remote view of <code>javax.management.remote.rmi.RMIServer</code> interface. This approach requires active <em>connector server</em> running in the JVM which' MBeanServer instances we want to access remotely.</p>
</li>
<li>
<p><em>protocol adaptor</em>, where there is no direct remote representation of an MBeanServer. Instead a set of specific protocol operations is mapped to a set of operations on MBeanServer. For HTTP protocol, operations like GET or POST with details specified in HTTP payloads may be used to operate on an MBeanServer. And this is the approach taken by Jolokia.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
JMX <em>connectors</em> were originally defined in details in <a href="https://jcp.org/en/jsr/detail?id=160" class="externalLink" target="_blank" rel="noopener">JMX Remote API Specification (JSR-160)</a>. JSR-160 was then merged with <a href="https://jcp.org/en/jsr/detail?id=3" class="externalLink" target="_blank" rel="noopener">JMX Specification 1.4 (JSR-3)</a> itself.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="jolokia_architecture">Jolokia architecture</h3>
<div class="paragraph">
<p>Jolokia exposes a <em>protocol adaptor</em> using an <em>agent</em> which effectively translates HTTP protocol messages into operations invoked on an instance of <code>javax.management.MBeanServer</code> (or <code>javax.management.MBeanServerConnection</code> in <a href="features/proxy.html">Proxy mode</a>) and their results.</p>
</div>
<div class="paragraph">
<p>Each kind of Jolokia supported <em>agent</em> uses the same set of <a href="#support-classes">support classes</a>.</p>
</div>
<div class="sect3">
<h4 id="jolokia_agents">Jolokia agents</h4>
<div class="paragraph">
<p>There are 3 kinds of agents supported by Jolokia:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">JVM agent</dt>
<dd>
<p>An agent installed using <a href="https://docs.oracle.com/en/java/javase/11/docs/api/jdk.attach/com/sun/tools/attach/VirtualMachine.html" class="externalLink" target="_blank" rel="noopener">JVM Attach API</a> or <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.instrument/java/lang/instrument/package-summary.html" class="externalLink" target="_blank" rel="noopener">Java Instrument API</a>.</p>
</dd>
<dt class="hdlist1">WAR agent</dt>
<dd>
<p>An agent started from WAR application with <code>org.jolokia.server.core.http.AgentServlet</code> servlet declared.</p>
</dd>
<dt class="hdlist1">OSGi agent</dt>
<dd>
<p>An agent started from a bundle, which registers <code>org.jolokia.server.core.osgi.OsgiAgentServlet</code> using <a href="https://docs.osgi.org/specification/osgi.cmpn/8.1.0/service.servlet.html" class="externalLink" target="_blank" rel="noopener">OSGi CMPN Whiteboard Specification for Jakartaâ„¢ Servlet</a>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>JVM Agent uses JDK&#8217;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/jdk.httpserver/com/sun/net/httpserver/package-summary.html" class="externalLink" target="_blank" rel="noopener">own HTTP server</a>. WAR agent just runs inside Servlet container and OSGi agent uses whatever HTTP server is available in the OSGi runtime.</p>
</div>
</div>
<div class="sect3">
<h4 id="support-classes">Jolokia support classes</h4>
<div class="paragraph">
<p>For all the agents, Jolokia uses the same set of classes for two kinds of processing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>initialization stage</em>, when Jolokia is configured</p>
</li>
<li>
<p><em>request processing stage</em>, when Jolokia handles incoming HTTP requests, communicates with <code>javax.management.MBeanServer</code> and returns HTTP responses after translating the results</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="initialization_stage">Initialization stage</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.jolokia.server.core.config.Configuration</code></dt>
<dd>
<p>an interface for accessing the configuration</p>
</dd>
<dt class="hdlist1"><code>org.jolokia.server.core.service.api.LogHandler</code></dt>
<dd>
<p>an interface used for logging, delegates to underlying (Servlet, OSGi Logging, <code>stdout</code>) logging mechanism</p>
</dd>
<dt class="hdlist1"><code>org.jolokia.server.core.service.api.JolokiaServiceManager</code></dt>
<dd>
<p>an interface used to configure and discover services used throughout Jolokia</p>
</dd>
<dt class="hdlist1"><code>org.jolokia.server.core.service.api.JolokiaContext</code></dt>
<dd>
<p>single access point to access configuration, Jolokia services and register MBeans in platform MBeanServer</p>
</dd>
<dt class="hdlist1"><code>org.jolokia.server.core.detector.ServerDetector</code></dt>
<dd>
<p>is used to detect platofm-specific <code>javax.management.MBeanServer</code> instances (which may not be detected using <code>javax.management.MBeanServerFactory.findMBeanServer(null)</code>)</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="request_processing_stage">Request processing stage</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.jolokia.server.core.service.api.Restrictor</code></dt>
<dd>
<p>ACL style interface for restricting remote access</p>
</dd>
<dt class="hdlist1"><code>org.jolokia.server.core.http.HttpRequestHandler</code></dt>
<dd>
<p>translates HTTP request into <code>JolokiaRequest</code></p>
</dd>
<dt class="hdlist1"><code>org.jolokia.server.core.request.JolokiaRequest</code></dt>
<dd>
<p>represents generic Jolokia request</p>
</dd>
<dt class="hdlist1"><code>org.jolokia.server.core.backend.BackendManager</code></dt>
<dd>
<p>handles generic <code>JolokiaRequest</code></p>
</dd>
<dt class="hdlist1"><code>org.jolokia.server.core.backend.RequestDispatcher</code></dt>
<dd>
<p>is used by backend manager to process <code>JolokiaRequest</code></p>
</dd>
<dt class="hdlist1"><code>org.jolokia.server.core.service.request.RequestInterceptor</code></dt>
<dd>
<p>is used to process a result JSON from request dispatcher</p>
</dd>
<dt class="hdlist1"><code>org.jolokia.server.core.service.request.RequestHandler</code></dt>
<dd>
<p>a service obtained from <code>JolokiaContext</code>. Request dispatcher obtains available handlers from <code>JolokiaContext</code> (and <code>JolokiaServiceManager</code>) and passes the incoming request to each of the handlers.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="available_request_handlers">Available request handlers</h5>
<div class="paragraph">
<p>Jolokia provides several implementations of <code>org.jolokia.server.core.service.request.RequestHandler</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.jolokia.server.core.service.impl.VersionRequestHandler</code></dt>
<dd>
<p>doesn&#8217;t really call any MBean, but simply returns version information of Jolokia agent.</p>
</dd>
<dt class="hdlist1"><code>org.jolokia.service.jmx.LocalRequestHandler</code></dt>
<dd>
<p>most important handler, which directly calls <code>javax.management.MBeanServer</code> (actually a merged view of available MBeanServer instances)</p>
</dd>
<dt class="hdlist1"><code>org.jolokia.service.jsr160.Jsr160RequestHandler</code></dt>
<dd>
<p>calls remote <code>MBeanServer</code> through JSR-160 connector (<code>javax.management.remote.JMXConnector</code>)</p>
</dd>
<dt class="hdlist1"><code>org.jolokia.support.spring.backend.SpringRequestHandler</code></dt>
<dd>
<p>operates on beans obtained from Spring&#8217;s <code>org.springframework.context.ApplicationContext</code> using <code>name</code> key from target <code>javax.management.ObjectName</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
      <!-- /Page content -->
    </div>
  </main>

  <footer class="copyright">Copyright &#169;                   2024 Roland Hu&szlig;. 
          All Rights Reserved.      
                
                 <span id="publishDate">Last Published: 2024-12-04</span>
              &nbsp;| <span id="projectVersion">Version: 2.1.3-SNAPSHOT</span>
            </footer>
</div>
</body>
</html>
