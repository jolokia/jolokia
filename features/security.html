<!DOCTYPE html>
<!-- Generated by Apache Maven Doxia at 2024-12-04 -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="keywords" content="jmx, rest, json, http, agent, jmx-rest-bridge, java, jmx4perl, jsr-160, jmx-rest">
  <title>                                          Jolokia &#x2013; Secure                    </title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap">
  <style media="all">
    @import url("../css/reset.css");
    @import url("../css/text.css");
    @import url("../css/maven-theme-jolokia.css");
    @import url("../css/site.css");
  </style>
  <script data-cfasync="false">
    let host = "jolokia.org";
      if ((host === window.location.host) && (window.location.protocol !== "https:")) {
        window.location.protocol = "https";
      }
  </script>
  <script src="../js/prettify/prettify.js"></script>
  <link rel="stylesheet" href="../css/print.css" media="print">
  <link rel="icon" type="image/png" href="../images/favicon.png">
  <meta name="Date-Creation-yyyymmdd" content="20241204" />
  <meta name="Date-Revision-yyyymmdd" content="20241204" />
  <meta http-equiv="Content-Language" content="en" />
  
</head>
<body>
<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="header-image"></div>
  </div>

  <!-- Top-Bar  -->
  <nav class="header">
      <div class="top_left"></div>
      <div class="top_link">
        <a href="../index.html">Home</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../download.html">Download</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../features.html">Features</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../documentation.html">Documentation</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../support.html">Support</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="https://ro14nd.de">Blog</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../about.html">About</a>
    </div>
    <div class="top_sep"></div>
    </nav>

  <main>
    <nav class="menu">
            <div class="navibox">
          <div class="navihead">
             <h5>Jolokia</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../libraries.html" title="Libraries">Libraries</a>
            </li>
                  <li class="none">
                          <a href="../migration.html" title="Migration to 2.0">Migration to 2.0</a>
            </li>
                  <li class="none">
                          <a href="../features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../support.html" title="Support">Support</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../documentation.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../concepts.html" title="Concepts">Concepts</a>
            </li>
                  <li class="none">
                          <a href="../tutorial.html" title="Tutorial">Tutorial</a>
            </li>
                  <li class="none">
                          <a href="../reference/html/index.html" title="Reference Manual">Reference Manual</a>
            </li>
                  <li class="none">
                          <a href="../talks.html" title="Talks and Screencasts">Talks and Screencasts</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Agents</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../agent.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../agent/war.html" title="Web Archive (war)">Web Archive (war)</a>
            </li>
                  <li class="none">
                          <a href="../agent/osgi.html" title="Osgi">Osgi</a>
            </li>
                  <li class="none">
                          <a href="../agent/jvm.html" title="JVM">JVM</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Clients</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../client/java.html" title="Java">Java</a>
            </li>
                  <li class="none">
                          <a href="../client/javascript.html" title="JavaScript">JavaScript</a>
            </li>
                  <li class="none">
                          <a href="../client/perl.html" title="Perl">Perl</a>
            </li>
                  <li class="none">
                          <a href="../client/curl.html" title="Curl">Curl</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Project Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
    </div>
      </div>
      </nav>
    <div class="main">
      <!-- Page content -->
      <div class="sect1">
<h2 id="jmx_proxy">JMX Proxy</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image right"><img src="../images/features/secure_large.png" alt="Security"/></span>
Security in Jolokia is provided at two levels: The transport
channel (HTTP) is secured the standard way as it is defined in
the Jakarta EE specifications. The agent itself can be configured to
use a very fine grained policy which can restrict access on
the MBean level for various parameters.</p>
</div>
<div class="paragraph">
<p>In especially, the policy can restrict access to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>certain client host IPs or subnets</p>
</li>
<li>
<p>certain Jolokia operations (read, write, exec, list, search, notification)</p>
</li>
<li>
<p>specific MBean attributes (read and write) and operations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The security definitions support a wildcard notation and
allow/deny sections similar to the security setup of an Apache
HTTP-Server.</p>
</div>
<div class="sect2">
<h3 id="example">Example</h3>
<div class="paragraph">
<p>The following example shows a sample policy file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;restrict&gt;</span>

  <span class="nt">&lt;remote&gt;</span>
    <span class="nt">&lt;host&gt;</span>127.0.0.1<span class="nt">&lt;/host&gt;</span>
    <span class="nt">&lt;host&gt;</span>localhost<span class="nt">&lt;/host&gt;</span>
    <span class="nt">&lt;host&gt;</span>10.0.0.0/16<span class="nt">&lt;/host&gt;</span>
  <span class="nt">&lt;/remote&gt;</span>

  <span class="nt">&lt;cors&gt;</span>
    <span class="nt">&lt;allow-origin&gt;</span>https://www.jmx4perl.org<span class="nt">&lt;/allow-origin&gt;</span>
    <span class="nt">&lt;allow-origin&gt;</span>*.jolokia.org<span class="nt">&lt;/allow-origin&gt;</span>
  <span class="nt">&lt;/cors&gt;</span>

  <span class="nt">&lt;commands&gt;</span>
    <span class="nt">&lt;command&gt;</span>read<span class="nt">&lt;/command&gt;</span>
    <span class="nt">&lt;command&gt;</span>write<span class="nt">&lt;/command&gt;</span>
  <span class="nt">&lt;/commands&gt;</span>

  <span class="nt">&lt;allow&gt;</span>
    <span class="nt">&lt;mbean&gt;</span>
      <span class="nt">&lt;name&gt;</span>java.lang:type=Memory<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;attribute</span> <span class="na">mode=</span><span class="s">"read"</span><span class="nt">&gt;</span>Verbose<span class="nt">&lt;/attribute&gt;</span>
      <span class="nt">&lt;operation&gt;</span>gc<span class="nt">&lt;/operation&gt;</span>
    <span class="nt">&lt;/mbean&gt;</span>

    <span class="nt">&lt;mbean&gt;</span>
      <span class="nt">&lt;name&gt;</span>jolokia:type=Config<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;operation&gt;</span>*<span class="nt">&lt;/operation&gt;</span>
    <span class="nt">&lt;/mbean&gt;</span>
    <span class="nt">&lt;mbean&gt;</span>
      <span class="nt">&lt;name&gt;</span>java.lang:type=Threading<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;operation&gt;</span>findDeadlockedThreads<span class="nt">&lt;/operation&gt;</span>
    <span class="nt">&lt;/mbean&gt;</span>
  <span class="nt">&lt;/allow&gt;</span>

  <span class="nt">&lt;deny&gt;</span>
    <span class="nt">&lt;mbean&gt;</span>
      <span class="nt">&lt;name&gt;</span>com.mchange.v2.c3p0:type=PooledDataSource,*<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;attribute&gt;</span>properties<span class="nt">&lt;/attribute&gt;</span>
    <span class="nt">&lt;/mbean&gt;</span>
    <span class="nt">&lt;mbean&gt;</span>
      <span class="nt">&lt;name&gt;</span>jdk.management.jfr:type=FlightRecorder<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;attribute&gt;</span>*<span class="nt">&lt;/attribute&gt;</span>
      <span class="nt">&lt;operation&gt;</span>*<span class="nt">&lt;/operation&gt;</span>
    <span class="nt">&lt;/mbean&gt;</span>
  <span class="nt">&lt;/deny&gt;</span>

<span class="nt">&lt;/restrict&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This sample policy contains a list of remote hosts which are
allowed to access this agent. The name can be given as IP or
FQDN. A  subnetmask can be given, too, for specifying a subnet
for the access. The netmask can be given either in CIDR format
(e.g "/16") or as a full netmask (e.g. "/255.255.0.0").</p>
</div>
<div class="paragraph">
<p>The address to check is obtained from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in WAR agent: <code>jakarta.servlet.ServletRequest.getRemoteHost()</code> or <code>jakarta.servlet.ServletRequest.getRemoteAddr()</code> depending on <code>allowDnsReverseLookup</code> configuration option</p>
<div class="ulist">
<ul>
<li>
<p>In Tomcat, the remote address value comes from <code>java.net.Socket.getInetAddress()</code> call</p>
</li>
</ul>
</div>
</li>
<li>
<p>in JVM agent: <code>com.sun.net.httpserver.HttpExchange.getRemoteAddress()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The list of allowed commands, which are given in
<code>&lt;commands&gt;</code> section determine which Jolokia
operations are allowed in general.  For each command type
present, the principle behaviour is allow this command for all
MBeans. To remove an MBean (attribute/operation), a <code>&lt;deny&gt;</code>
section has to be added.  For each command type missing, the
command is disabled by default. For certain MBeans it can be
selectively be enabled by using an <code>&lt;allow&gt;</code>
section below. Within the allow and deny sections, MBean names
and attribute/operation names can be specified with a pattern
using wildcards (<code>?</code>,<code>*</code>)</p>
</div>
</div>
<div class="sect2">
<h3 id="next">Next</h3>
<div class="ulist">
<ul>
<li>
<p>Jolokia is really <a href="fast.html">fast</a>. See why.</p>
</li>
<li>
<p>Learn more about Jolokia&#8217;s <a href="proxy.html">Proxy Mode</a> and agentless operation.</p>
</li>
<li>
<p>Go Back to the <a href="../features.html">Features Overview</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
      <!-- /Page content -->
    </div>
  </main>

  <footer class="copyright">Copyright &#169;                   2024 Roland Hu&szlig;. 
          All Rights Reserved.      
                
                 <span id="publishDate">Last Published: 2024-12-04</span>
              &nbsp;| <span id="projectVersion">Version: 2.1.3-SNAPSHOT</span>
            </footer>
</div>
</body>
</html>
