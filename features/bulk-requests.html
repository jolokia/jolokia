<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at 2021-07-27 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="keywords" content="jmx, rest, json, http, agent, jmx-rest-bridge, java, jmx4perl, jsr-160, jmx-rest"/>
    <title>Jolokia &#x2013; Bulk Requests</title>
    <style type="text/css" media="all">
      @import url("../css/reset.css");
      @import url("../css/text.css");
      @import url("../css/960_24_col.css");
      @import url("../css/maven-base.css");
      @import url("../css/prettify.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <script data-cfasync="false" type="text/javascript">
       var host = "jolokia.org";
       if ((host == window.location.host) && (window.location.protocol != "https:")) {
            window.location.protocol = "https";
       }
    </script>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9534565-3']);
  _gaq.push(['_setDomainName', '.jolokia.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
    </script>
    <script type="text/javascript" src="../js/prettify/prettify.js"></script>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <link rel="icon" type="image/png" href="../images/favicon.png" />
      <meta name="author" content="Roland Huss" />
    <meta name="Date-Revision-yyyymmdd" content="20210727" />
    <meta http-equiv="Content-Language" content="en" />
     
  </head>
  <body class="composite" onload="prettyPrint()">
    <div class="container_24">

      <!-- Header -->
      <div class="grid_24 header">
        <div></div>
      </div>
      <div class="clear"></div>

      <!-- Top-Bar  -->
      <div class="grid_24 top_bar">
          <div class="top_left"></div>
      <div class="top_link">
        <a href="../index.html">Home</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../download.html">Download</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../features-nb.html">Features</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../documentation.html">Documentation</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../support.html">Support</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="https://ro14nd.de">Blog</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../about.html">About</a>
    </div>
    <div class="top_sep"></div>
        </div>
      <div class="clear"></div>

      <!-- Main-Box  -->
      <div class="grid_24 main_box">
        <!-- Main-Top -->
        <div class="grid_24 alpha main_top"></div>
        <div class="grid_24 alpha main_content">
          <!-- Navigation -->
          <div class="grid_5 alpha">
                  <div class="navibox">
          <div class="navihead">
             <h5>Jolokia</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../features-nb.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../support.html" title="Support">Support</a>
            </li>
                  <li class="none">
                          <a href="../forum.html" title="Forum">Forum</a>
            </li>
                  <li class="none">
                          <a href="../irc.html" title="IRC">IRC</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../documentation.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../tutorial.html" title="Tutorial">Tutorial</a>
            </li>
                  <li class="none">
                          <a href="../reference/html/index.html" title="Reference Manual">Reference Manual</a>
            </li>
                  <li class="none">
                          <a href="../talks.html" title="Talks and Screencasts">Talks and Screencasts</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Agents</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../agent.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../agent/war.html" title="Web Archive (war)">Web Archive (war)</a>
            </li>
                  <li class="none">
                          <a href="../agent/osgi.html" title="Osgi">Osgi</a>
            </li>
                  <li class="none">
                          <a href="../agent/jvm.html" title="JVM">JVM</a>
            </li>
                  <li class="none">
                          <a href="../agent/mule.html" title="Mule">Mule</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Clients</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../client/java.html" title="Java">Java</a>
            </li>
                  <li class="none">
                          <a href="../client/javascript.html" title="Javascript">Javascript</a>
            </li>
                  <li class="none">
                          <a href="../client/perl.html" title="Perl">Perl</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Project Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
    </div>
      </div>
            </div>
          <!-- Main Box -->
          <div class="grid_18 omega">
            <div class="content_box grid_18 alpha">
              <div class="content_top_bg content_top grid_18 alpha"></div>
              <div class="content_content_bg content_content grid_18">
                <!-- ~ Copyright 2009-2013 Roland Huss
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~       http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License. -->

  
    <div class="section">
<h2><a name="Bulk_Requests"></a>Bulk Requests</h2>
      
<div class="feature_icon_large">
        <img src="../images/features/bulk_requests_large.png" alt="Bulk-Requests" />
      </div>
      
<p>
        In order to monitor Java application servers, a multitude of
        parameters can be observed. Memory and thread consumption,
        database connection pool utilisation, HTTP request response
        for various web application are examples for valuable metrics
        to monitor. Typically, 10-20 monitored attributes are a good
        setup for a single Java EE server.
      </p>
      
<p>
        With the traditional approach using JSR-160 JMX connectors,
        a connection is opened, and for each attribute queried a
        separate RMI (or optional JMXMP) request needs to be send to
        the server resulting in several client-server turnarounds.
        Wouldn't it be nice to use a single request for querying all
        those parameters ?
      </p>
      
<p>
        With Jolokia's <b>bulk requests</b> this is a piece
        of cake. A single HTTP POST request can carry a list of JSON
        request objects, which are dispatched by the Jolokia agent on
        the server side into multiple local JMX calls. The results are
        collected and returned as list of JSON response objects. In
        case of an exception when executing the JMX call, the error is
        propragated as part of the response without influencing the
        other results.
      </p>
      
<div class="section">
<h3><a name="Example"></a>Example</h3>
        
<p>
          Let's have a look at an example.  Jolokias client libraries
          (currently available for <a href="../client/javascript.html">JavaScript</a>,
         <a href="../client/java.html">Java</a> and <a href="../client/perl.html">Perl</a>) make the usage of bulk
          request easy by providing an extra layer of abstraction:
        </p>
        
<div>
<pre class="prettyprint">
  J4pClient j4pClient = new J4pClient(&quot;http://localhost:8080/jolokia/&quot;);
  J4pRequest req1 = new J4pExecRequest(&quot;java.lang:type=Memory&quot;,&quot;gc&quot;);
  J4pRequest req2 = new J4pReadRequest(&quot;java.lang:type=Memory&quot;,&quot;HeapMemoryUsage&quot;);
  List&lt;J4pResponse&lt;J4pRequest&gt;&gt; responses = j4pClient.execute(req1,req2);
  Map memVals = responses.get(1).getValue();
  System.out.println(&quot;Memory used: &quot; + memVals.get(&quot;used&quot;));</pre></div>
        
<p>
          This gets translated in the following JSON request, which is
          transmitted to the agent via an HTTP POST request (the URL has
          been set up in the <tt>j4pClient</tt> object above):
        </p>
        
<div>
<pre class="prettyprint">
   [{ &quot;operation&quot;:&quot;gc&quot;,
      &quot;mbean&quot;:&quot;java.lang:type=Memory&quot;,
      &quot;type&quot;:&quot;EXEC&quot;
    },
    {
      &quot;mbean&quot;:&quot;java.lang:type=Memory&quot;,
      &quot;attribute&quot;:&quot;HeapMemoryUsage&quot;,
      &quot;type&quot;:&quot;READ&quot;
    }]</pre></div>
        
<p>
          The answer returned is also represented in JSON and looks like
          this:
        </p>
        
<div>
<pre class="prettyprint">
   [{ &quot;timestamp&quot;:1285442161,
      &quot;status&quot;:200,
      &quot;request&quot;: { &quot;mbean&quot;:&quot;java.lang:type=Memory&quot;,
                    &quot;operation&quot;:&quot;gc&quot;,
                    &quot;type&quot;:&quot;exec&quot; },
      &quot;value&quot;:null
     },
     {
      &quot;timestamp&quot;:1285442161,
      &quot;status&quot;:200,
      &quot;request&quot;: { &quot;mbean&quot;:&quot;java.lang:type=Memory&quot;,
                   &quot;attribute&quot;:&quot;HeapMemoryUsage&quot;,
                   &quot;type&quot;:&quot;read&quot; },
      &quot;value&quot;: {&quot;max&quot;:&quot;129957888&quot;,
                &quot;committed&quot;:&quot;85000192&quot;,
                &quot;init&quot;:&quot;0&quot;,
                &quot;used&quot;:&quot;3660720&quot; }
     }]</pre></div>
        
<p>
          Another example how bulk requests can be used is the <a class="externalLink" href="http://www.nagios.org/">Nagios</a>
          Plugin <a class="externalLink" href="http://search.cpan.org/~roland/jmx4perl/scripts/check_jmx4perl">check_jmx4perl</a>,
          which uses bulk requests
          for its <i>multi check</i> features, which allows for a
          single Nagios check monitor as many JMX attributes and
          operations as required.
        </p>
      </div>
      
<div class="section">
<h3><a name="Next"></a>Next</h3>
        
<ul>
          
<li>
            Learn more about Jolokia's <a href="proxy.html">Proxy Mode</a> and agentless operation.
          </li>
          
<li>
            Read an introduction and <a href="overview.html">overview</a> for Jolokia.
          </li>
          
<li>
            Go Back to the <a href="../features-nb.html">Features Overview</a>.
          </li>
        </ul>
      </div>
    </div>
  

              </div>
              <div class="content_bottom_bg content_bottom grid_18 omega"></div>
            </div>
          </div>
          <div class="grid_24 alpha">
            <div class="copyright_footer">Copyright &#169;                   2021 Roland Hu&szlig;. 
          All Rights Reserved.      
                
                 <span id="publishDate">Last Published: 2021-07-27</span>
              &nbsp;| <span id="projectVersion">Version: 1.7.1-SNAPSHOT</span>
            </div>
          </div>
          <div class="clear"></div>
        </div>
        <!-- Main Bottom -->
        <div class="grid_24 alpha main_bottom"></div>        
      </div>
    </div>
  </body>
</html>
  
