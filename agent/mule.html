<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at 2015-05-07 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="keywords" content="jmx, rest, json, http, agent, jmx-rest-bridge, java, jmx4perl, jsr-160, jmx-rest"/>
    <title>Jolokia &#x2013; Mule Agent - Installation</title>
    <style type="text/css" media="all">
      @import url("../css/reset.css");
      @import url("../css/text.css");
      @import url("../css/960_24_col.css");
      @import url("../css/maven-base.css");
      @import url("../css/prettify.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <script data-cfasync="false" type="text/javascript">
       var host = "jolokia.org";
       if ((host == window.location.host) && (window.location.protocol != "https:")) {
            window.location.protocol = "https";
       }
    </script>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9534565-3']);
  _gaq.push(['_setDomainName', '.jolokia.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
    </script>
    <script type="text/javascript" src="../js/prettify/prettify.js"></script>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <link rel="icon" type="image/png" href="../images/favicon.png" />
      <meta name="author" content="Roland Huss" />
    <meta name="Date-Revision-yyyymmdd" content="20150507" />
    <meta http-equiv="Content-Language" content="en" />
     
  </head>
  <body class="composite" onload="prettyPrint()">
    <div class="container_24">

      <!-- Header -->
      <div class="grid_24 header">
        <div></div>
      </div>
      <div class="clear"></div>

      <!-- Top-Bar  -->
      <div class="grid_24 top_bar">
          <div class="top_left"></div>
      <div class="top_link">
        <a href="../index.html">Home</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../download.html">Download</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../features-nb.html">Features</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../documentation.html">Documentation</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../support.html">Support</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="https://ro14nd.de">Blog</a>
    </div>
    <div class="top_sep"></div>
      <div class="top_link">
        <a href="../about.html">About</a>
    </div>
    <div class="top_sep"></div>
        </div>
      <div class="clear"></div>

      <!-- Main-Box  -->
      <div class="grid_24 main_box">
        <!-- Main-Top -->
        <div class="grid_24 alpha main_top"></div>
        <div class="grid_24 alpha main_content">
          <!-- Navigation -->
          <div class="grid_5 alpha">
                  <div class="navibox">
          <div class="navihead">
             <h5>Jolokia</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../features-nb.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../support.html" title="Support">Support</a>
            </li>
                  <li class="none">
                          <a href="../forum.html" title="Forum">Forum</a>
            </li>
                  <li class="none">
                          <a href="../irc.html" title="IRC">IRC</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../documentation.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../tutorial.html" title="Tutorial">Tutorial</a>
            </li>
                  <li class="none">
                          <a href="../reference/html/index.html" title="Reference Manual">Reference Manual</a>
            </li>
                  <li class="none">
                          <a href="../talks.html" title="Talks and Screencasts">Talks and Screencasts</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Agents</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../agent.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../agent/war.html" title="Web Archive (war)">Web Archive (war)</a>
            </li>
                  <li class="none">
                          <a href="../agent/osgi.html" title="Osgi">Osgi</a>
            </li>
                  <li class="none">
                          <a href="../agent/jvm.html" title="JVM">JVM</a>
            </li>
                  <li class="none">
            <strong>Mule</strong>
          </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Clients</h5>
            </div>    
            <div class="naviitems">
    <ul>
                  <li class="none">
                          <a href="../client/java.html" title="Java">Java</a>
            </li>
                  <li class="none">
                          <a href="../client/javascript.html" title="Javascript">Javascript</a>
            </li>
                  <li class="none">
                          <a href="../client/perl.html" title="Perl">Perl</a>
            </li>
          </ul>
    </div>
      </div>
      <div class="navibox">
          <div class="navihead">
             <h5>Project Documentation</h5>
            </div>    
            <div class="naviitems">
    <ul>
                                                                                                                                                                                <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
    </div>
      </div>
            </div>
          <!-- Main Box -->
          <div class="grid_18 omega">
            <div class="content_box grid_18 alpha">
              <div class="content_top_bg content_top grid_18 alpha"></div>
              <div class="content_content_bg content_content grid_18">
                <!-- ~ Copyright 2009-2013 Roland Huss
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~       http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License. -->
  
  
    <div class="section">
<h2><a name="Mule_Agent_Installation"></a>Mule Agent Installation</h2>
      
<p>
        Jolokia has also a <a class="externalLink" href="http://www.mulesoft.org">Mule
        ESB</a> agent which can be deployed on the Mule ESB (running
        in standalone mode).
      </p>
      
<p>
        The agent jar needs to be stored within the Mule
        installation in <tt>lib/opt/</tt>. Additionally, the Mule
        configuration needs to be adapted to contain the following
        section:
      </p>      
      
<div>
<pre class="prettyprint">
&lt;mule xmlns=&quot;http://www.mulesoft.org/schema/mule/core&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:management=&quot;http://www.mulesoft.org/schema/mule/management&quot;
    xmlns:spring=&quot;http://www.springframework.org/schema/beans&quot; 
    xsi:schemaLocation=&quot;
       http://www.mulesoft.org/schema/mule/core 
             http://www.mulesoft.org/schema/mule/core/3.1/mule.xsd
       http://www.springframework.org/schema/beans 
             http://www.springframework.org/schema/beans/spring-beans-2.5.xsd 
       http://www.mulesoft.org/schema/mule/management 
             http://www.mulesoft.org/schema/mule/management/3.1/mule-management.xsd&quot;&gt;

   &lt;!-- .... --&gt;
   &lt;custom-agent name=&quot;jolokia-agent&quot; class=&quot;org.jolokia.mule.JolokiaMuleAgent&quot;&gt;
      &lt;spring:property name=&quot;port&quot; value=&quot;8899&quot;/&gt;
   &lt;/custom-agent&gt;
   &lt;management:jmx-server/&gt;
&lt;/mule&gt;</pre></div>
      
<p>
        Starting up mule should yield a startup message like 
      </p>
      
<div>
<pre>
**********************************************************************
* Mule ESB and Integration Platform                                  *
* Version: 3.1.2 Build: 21975                                        *
* MuleSoft, Inc.                                                     *
* For more information go to http://www.mulesoft.org                 *
*                                                                    *
* Server started: 8/26/11 11:26 PM                                   *
* JDK: 1.6.0_26 (mixed mode)                                         *
* OS: Mac OS X (10.6.8, x86_64)                                      *
* Host: dev4.local (10.9.11.128)                                     *
* Agents Running:                                                    *
*   Wrapper Manager: Mule PID #0, Wrapper PID #861                   *
*   Jolokia Agent: http://localhost:8899/jolokia                     *
*   JMX Agent                                                        *
**********************************************************************</pre></div>
      
<p>
        Note the URL for the Jolokia agent which can be used by a client like <tt>jmx4perl</tt>,
        <tt>check_jmx4perl</tt> or <tt>j4psh</tt> like
      </p>
      
<div>
<pre>
 jmx4perl http://localhost:8899/jolokia list</pre></div>
      
<p>
        which will result in an output similar to
      </p>
      
<div>
<pre>
 Mule.myMule:
    Mule.myMule:name=AllStatistics,type=org.mule.Statistics
        Attributes:
            Enabled                             boolean
        Operations:
            void logSummary()                   
            java.lang.String printXmlSummary()  
            java.lang.String printHtmlSummary() 
            void clear()                        
            java.lang.String printCSVSummary()  
 
 ....
 java.lang:
    java.lang:type=Memory
        Attributes:
            NonHeapMemoryUsage                  CompositeData [ro] 
            ObjectPendingFinalizationCount      int [ro]
            Verbose                             boolean
            HeapMemoryUsage                     CompositeData [ro]
        Operations:
            void gc()</pre></div>
      
<p>
        Note that Mule was started here with a server id myMule (startup
        option: <tt>-M-Dmule.serverId=myMule</tt>). As you can see you have
        access to the Mule specific MBeans and the Java platform MXBeans
        (which BTW is not easy achievable using Mules JSR-160 agents
        directly).
      </p>
      
<p>
        For enabling basic security the properties user and password can be set:
      </p>
      
<div>
<pre class="prettyprint">
 &lt;custom-agent name=&quot;jolokia-agent&quot; class=&quot;org.jolokia.mule.JolokiaMuleAgent&quot;&gt;
   &lt;spring:property name=&quot;user&quot; value=&quot;roland&quot;/&gt;
   &lt;spring:property name=&quot;password&quot; value=&quot;wtf&quot;/&gt;
 &lt;/custom-agent&gt;
 &lt;management:jmx-server/&gt;</pre></div>
      
<p>
        On the client side the options <tt>--user</tt> and <tt>--password</tt> can be
        used with <tt>jmx4perl</tt> and <tt>check_jmx4perl</tt> for specifying the
        credentials.
      </p>
      
<p>
        Finally, all other options as specified as init parameters in
        <tt>jolokia.war</tt>s web.xml can be used as properties here as well.
      </p>
    </div>
  

              </div>
              <div class="content_bottom_bg content_bottom grid_18 omega"></div>
            </div>
          </div>
          <div class="grid_24 alpha">
            <div class="copyright_footer">Copyright &#169;                   2015 Roland Hu&szlig;. 
          All Rights Reserved.      
                
                 <span id="publishDate">Last Published: 2015-05-07</span>
              &nbsp;| <span id="projectVersion">Version: 1.2.4-SNAPSHOT</span>
            </div>
          </div>
          <div class="clear"></div>
        </div>
        <!-- Main Bottom -->
        <div class="grid_24 alpha main_bottom"></div>        
      </div>
    </div>
  </body>
</html>
  
